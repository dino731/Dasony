<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="shopMapper">

	<resultMap type="shop" id="shopMap">
		<id column="SHOP_OKEY" property="shopOkey" />
		<result column="SHOP_NAME" property="shopName"/>
		<result column="SHOP_ADDRESS" property="shopAddress"/>
		<result column="SHOP_REGION" property="shopRegion"/>
	</resultMap>
	
	<select id="shopList" parameterType="string" resultMap="shopMap">
		SELECT *
		FROM SHOP
		 <where>
		    <if test="userRegion != '관리자'">
		        AND SHOP_REGION = #{userRegion}
		    </if>
		 </where>
	</select>
	
	<delete id="shopDelete" parameterType="map">
		DELETE FROM SHOP
		WHERE SHOP_OKEY = #{shopOkey}
	</delete>
	
	<insert id="shopAdd" parameterType="shop">
	    INSERT INTO SHOP
	    VALUES (
	    	(#{shopOkey} || SEQ_SHO.nextval),
	        #{shopName},
	        #{shopAddress},
	        #{shopRegion},
	        #{shopCate}
	    )
	</insert>
	
	<update id="modifyingShop" parameterType="shop">
		UPDATE SHOP
		SET 
			SHOP_NAME = #{shopName},
			SHOP_ADDRESS = #{shopAddress},
			SHOP_REGION = #{shopRegion},
			SHOP_CATE = #{shopCate}
		WHERE SHOP_OKEY = #{shopOkey}
	</update>
</mapper>
